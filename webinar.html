<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Pow'air - Webinaire</title>

  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="style.css">
  </head>
<body>
  <div class="gradient-bg">
    <div class="gradient-orb"></div>
    <div class="gradient-orb"></div>
    <div class="gradient-orb"></div>
  </div>

  <div class="mode-switch">
    <i class="fas fa-moon"></i>
  </div>

  <div id="auth-prompt" style="display: none;"> <div class="auth-prompt-content">
      <div class="auth-prompt-icon">
        <i class="fas fa-lock"></i>
      </div>
      <h2 class="auth-prompt-title">Accès Webinaire</h2>
      <p class="auth-prompt-text">Connectez-vous pour accéder au webinaire Pow'air en direct.</p>
      
      <form id="login-form" class="login-form">
        <div class="form-group">
          <label for="email">Email</label>
          <input type="email" id="email" name="email" placeholder="Votre email" required>
        </div>
        <div class="form-group">
          <label for="password">Mot de passe</label>
          <input type="password" id="password" name="password" placeholder="Votre mot de passe" required>
        </div>
        <button type="submit" class="btn btn-primary login-button">
          <i class="fas fa-sign-in-alt"></i>
          Se connecter
        </button>
        <div id="login-message" class="login-message"></div>
      </form>
      
      <div class="login-help">
        <p>Problème de connexion ? <a href="mailto:contact@powair.example.com">Contactez notre support</a></p>
      </div>
    </div>
  </div>

  <header>
  <div class="container">
  <div class="header-content">
  <a href="index.html" class="logo">
  <img src="images/logo-powair.png" alt="Pow'air Logo Icon"> Pow<span>'air</span>
  </a>
  <nav>
  <div id="user-account">
  <div class="user-info" id="user-info">
  <div class="user-info-icon" id="user-icon"></div>
  <span id="user-name"></span>
  </div>
  <button id="logout-button" class="btn btn-secondary">
  <i class="fas fa-sign-out-alt"></i>
  Déconnexion
  </button>
  </div>
  <button class="mobile-menu-button" aria-label="Ouvrir le menu">
  <i class="fas fa-bars"></i>
  </button>
  </nav>
  </div>
  </div>
  <div class="mobile-menu">
  <ul>
  <li style="--i:1"><a href="#" id="mobile-logout-button" class="btn btn-secondary">Déconnexion</a></li>
  </ul>
  </div>
 </header>

  <section class="webinar-section">
    <div class="container">
      <div class="webinar-container">
        <div class="webinar-header">
          <div class="webinar-badge">
            <i class="fas fa-video"></i>
            Webinaire Exclusif
            <span class="live-badge" id="webinar-status-badge">EN DIRECT</span>
          </div>
          <h1>L'innovation énergétique mobile avec Pow'air</h1>
          <p>Découvrez les dernières innovations et projets à venir pour notre réseau de recharge mobile.</p>
        </div>

        <div class="countdown-box">
          <h3>Prochain webinaire dans</h3>
          <div class="countdown-timer">
            <div class="countdown-unit">
              <div class="countdown-value" id="countdown-days">00</div>
              <div class="countdown-label">Jours</div>
            </div>
            <div class="countdown-unit">
              <div class="countdown-value" id="countdown-hours">00</div>
              <div class="countdown-label">Heures</div>
            </div>
            <div class="countdown-unit">
              <div class="countdown-value" id="countdown-minutes">00</div>
              <div class="countdown-label">Minutes</div>
            </div>
            <div class="countdown-unit">
              <div class="countdown-value" id="countdown-seconds">00</div>
              <div class="countdown-label">Secondes</div>
            </div>
          </div>
        </div>

        <div class="webinar-state-container">
          <div id="state-loading" class="webinar-state">
            <div class="webinar-state-placeholder">
              <div class="webinar-state-icon">
                <i class="fas fa-spinner fa-spin"></i>
              </div>
              <h3 class="webinar-state-title">Chargement du webinaire...</h3>
              <p class="webinar-state-text">Merci de patienter pendant que nous préparons le webinaire.</p>
            </div>
          </div>

          <div id="state-soon" class="webinar-state">
            <div class="webinar-state-soon">
              <div class="webinar-state-icon">
                <i class="fas fa-hourglass-half"></i>
              </div>
              <h3 class="webinar-state-title">Le webinaire commencera bientôt</h3>
              <p class="webinar-state-text">Préparez-vous, le direct débutera prochainement. Inscrivez-vous ci-dessous pour être notifié lorsque nous commencerons.</p>
            </div>
          </div>

          <div id="state-live" class="webinar-state active">
            <div class="webinar-stream-container">
              <div id="youtube-container" class="webinar-placeholder">
                <i class="fas fa-lock"></i>
                <p>Le lecteur vidéo sera disponible après connexion</p>
              </div>
            </div>
          </div>

          <div id="state-ended" class="webinar-state">
            <div class="webinar-state-ended">
              <div class="webinar-state-icon">
                <i class="fas fa-check-circle"></i>
              </div>
              <h3 class="webinar-state-title">Le webinaire est terminé</h3>
              <p class="webinar-state-text">Merci d'avoir participé à notre webinaire. Le replay sera bientôt disponible.</p>
              <a href="#" class="btn btn-primary" id="replay-button">
                <i class="fas fa-play"></i>
                Regarder le replay
              </a>
            </div>
          </div>
        </div>

        <div class="webinar-actions">
          <button class="webinar-action" id="share-button">
            <i class="fas fa-share-alt"></i> Partager
          </button>
          <button class="webinar-action" id="download-button">
            <i class="fas fa-file-pdf"></i> Télécharger la présentation
          </button>
          <button class="webinar-action" id="notify-button">
            <i class="fas fa-bell"></i> Être notifié
          </button>
        </div>

        <div class="webinar-content">
          <div class="webinar-main">
            <div class="webinar-chat">
              <div class="webinar-chat-header">
                <div class="webinar-chat-title">
                  <i class="fas fa-comments"></i> Chat en direct
                </div>
                <div class="webinar-chat-status">
                  <div class="webinar-chat-status-dot"></div> En ligne
                </div>
              </div>
              <div class="webinar-chat-messages" id="chat-messages">
                <div class="webinar-chat-message moderator">
                  <div class="webinar-chat-message-info">Modérateur</div>
                  Bienvenue dans le chat du webinaire ! Posez vos questions ici, nous y répondrons pendant la session.
                </div>
                <div class="webinar-chat-message moderator">
                  <div class="webinar-chat-message-info">Anne Dupont (PDG)</div>
                  Ravi de vous accueillir pour ce webinaire sur les innovations Pow'air ! Nous commencerons dans quelques instants.
                </div>
              </div>
              <div class="webinar-chat-input-container">
                <input type="text" class="webinar-chat-input" id="chat-input" placeholder="Écrivez votre message..." aria-label="Message">
                <button class="webinar-chat-send" id="chat-send">
                  <i class="fas fa-paper-plane"></i>
                </button>
              </div>
            </div>
            
        <div class="webinar-sidebar">

          <div class="webinar-info">
            <h3>Informations</h3>
            <div class="webinar-info-item">
              <div class="webinar-info-icon">
                <i class="fas fa-calendar-alt"></i>
              </div>
              <div class="webinar-info-text">
                <h4>Date et heure</h4>
                <p id="webinar-date">10 Mai 2025, 14:00</p>
              </div>
            </div>
            <div class="webinar-info-item">
              <div class="webinar-info-icon">
                <i class="fas fa-clock"></i>
              </div>
              <div class="webinar-info-text">
                <h4>Durée</h4>
                <p>1 heure 30 minutes</p>
              </div>
            </div>
            <div class="webinar-info-item">
              <div class="webinar-info-icon">
                <i class="fas fa-user"></i>
              </div>
              <div class="webinar-info-text">
                <h4>Présentateurs</h4>
                <p>Anne Dupont, PDG<br>Marc Lambert, Directeur technique</p>
              </div>
            </div>
            <div class="webinar-info-item">
              <div class="webinar-info-icon">
                <i class="fas fa-language"></i>
              </div>
              <div class="webinar-info-text">
                <h4>Langue</h4>
                <p>Français</p>
              </div>
            </div>
            
            <div class="webinar-info-divider" style="height: 1px; background-color: var(--border-color); margin: 1.5rem 0;"></div> 
            
            <h3>À propos de ce webinaire</h3>
            <p>Rejoignez notre PDG et notre équipe de développement pour une présentation exclusive des innovations à venir pour Pow'air. Durant cette session, nous aborderons :</p>
            <ul>
              <li>Les nouvelles générations de batteries à haute capacité</li>
              <li>L'extension de notre réseau dans de nouvelles villes</li>
              <li>Notre engagement environnemental et économie circulaire</li>
              <li>Les futures fonctionnalités de notre application mobile</li>
              <li>Un aperçu de nos partenariats stratégiques pour 2025</li>
            </ul>
            <p>Une session de questions-réponses sera organisée à la fin de la présentation. Vous pourrez poser vos questions directement via le chat en direct.</p>
          </div>

          <div class="webinar-cta">
            <h3>Besoin d'informations complémentaires ?</h3>
            <p>Programmez un rendez-vous personnalisé avec l'un de nos conseillers Pow'air.</p>
            <a href="#" class="btn btn-primary" id="appointment-button">
              <i class="fas fa-calendar-check"></i>
              Programmer un rendez-vous
            </a>
          </div>
        </div>
        </div>
      </div>
    </div>
  </section>

  <footer id="footer">
  <div class="footer-bg"></div>
  <div class="container">
  <div class="footer-content">
  <div class="footer-logo-area">
  <a href="index.html" class="footer-logo">
  <img src="images/logo-powair.png" alt="Pow'air Logo Icon"> Pow<span>'air</span>
  </a>
  <p class="footer-description">
  La solution simple et rapide pour ne plus jamais être à court de batterie. Louez, utilisez, retournez.
  </p>
  <div class="footer-social">
  <a href="#" class="social-icon" aria-label="Facebook" target="_blank" rel="noopener noreferrer"><i class="fab fa-facebook-f"></i></a>
  <a href="#" class="social-icon" aria-label="Instagram" target="_blank" rel="noopener noreferrer"><i class="fab fa-instagram"></i></a>
  <a href="#" class="social-icon" aria-label="Twitter" target="_blank" rel="noopener noreferrer"><i class="fab fa-twitter"></i></a>
  <a href="#" class="social-icon" aria-label="LinkedIn" target="_blank" rel="noopener noreferrer"><i class="fab fa-linkedin-in"></i></a>
  </div>
  </div>
  <div>
  <h4 class="footer-title">Liens rapides</h4>
  <ul class="footer-links">
  <li><a href="index.html#how-it-works">Comment ça marche</a></li>
  <li><a href="index.html#network">Notre réseau</a></li>
  <li><a href="index.html#benefits">Avantages</a></li>
  <li><a href="index.html#pricing">Tarifs</a></li>
  <li><a href="index.html#partners">Devenir partenaire</a></li>
  </ul>
  </div>
  <div>
  <h4 class="footer-title">Légal</h4>
  <ul class="footer-links">
  <li><a href="#">Conditions générales</a></li>
  <li><a href="#">Politique de confidentialité</a></li>
  <li><a href="#">Mentions légales</a></li>
  <li><a href="#">Gestion des cookies</a></li>
  </ul>
  </div>
  <div>
  <h4 class="footer-title">Contactez-nous</h4>
  <div class="footer-contact">
  <div class="contact-item">
  <div class="contact-icon"><i class="fas fa-map-marker-alt"></i></div>
  <span class="contact-text">123 Rue Fictive,<br>75000 Paris, France</span>
  </div>
  <div class="contact-item">
  <div class="contact-icon"><i class="fas fa-envelope"></i></div>
  <span class="contact-text"><a href="mailto:contact@powair.example.com">contact@powair.example.com</a></span>
  </div>
  <div class="contact-item">
  <div class="contact-icon"><i class="fas fa-phone"></i></div>
  <span class="contact-text"><a href="tel:+33123456789">+33 1 23 45 67 89</a></span>
  </div>
  </div>
  </div>
  </div>
  <div class="footer-divider"></div>
  <div class="footer-bottom">
  <p class="footer-copyright">
  © 2025 Pow'air. Tous droits réservés. Développé avec <i class="fas fa-heart"></i>.
  </p>
  <div class="footer-links-bottom">
  <a href="#">Conditions</a>
  <a href="#">Confidentialité</a>
  <a href="#">Plan du site</a>
  </div>
  </div>
  </div>
 </footer>

  <script src="script.js"></script> <script>
    document.addEventListener('DOMContentLoaded', () => {
        // --- Variables ---
        const authPrompt = document.getElementById('auth-prompt');
        const userInfo = document.getElementById('user-info');
        const userName = document.getElementById('user-name');
        const userIcon = document.getElementById('user-icon');
        const loginForm = document.getElementById('login-form');
        const loginMessage = document.getElementById('login-message');
        const logoutButton = document.getElementById('logout-button');
        const mobileLogoutButton = document.getElementById('mobile-logout-button');
        const youtubeContainer = document.getElementById('youtube-container');
        const initialYoutubePlaceholderHTML = youtubeContainer ? youtubeContainer.innerHTML : '<p>Chargement...</p>'; 
    
        // Configuration (gardée pour l'exemple - Utilisez vos propres valeurs si nécessaire)
        const webinarConfig = {
            title: "L'innovation énergétique mobile avec Pow'air",
            date: "10 Mai, 2025, 14:00",
            duration: "1 heure 30 minutes",
            youtubeId: "dQw4w9WgXcQ", // ID YouTube d'exemple
            state: "live", // 'loading', 'soon', 'live', 'ended'
            startTime: new Date("2025-05-10T14:00:00").getTime(),
            endTime: new Date("2025-05-10T15:30:00").getTime(),
            presentationUrl: "presentation-powair-2025.pdf"
        };
    
        // --- Fonctions d'aide pour l'UI ---
        function displayUserInfo(user) {
            if (user && user.name && userInfo && userName && userIcon) {
                userInfo.style.display = 'flex';
                userName.textContent = user.name;
                const initials = user.name.split(' ').map(part => part.charAt(0)).join('').toUpperCase();
                userIcon.textContent = initials;
                if(logoutButton) logoutButton.style.display = 'inline-flex';
            }
        }
    
        function hideUserInfo() {
            if (userInfo) userInfo.style.display = 'none';
            if (userName) userName.textContent = '';
            if (userIcon) userIcon.textContent = '';
            if(logoutButton) logoutButton.style.display = 'none';
        }
    
        function resetVideoPlayer() {
            if (youtubeContainer) {
                youtubeContainer.innerHTML = initialYoutubePlaceholderHTML;
            }
        }
    
        // --- Fonctions principales ---
    
        // Gestion du formulaire de connexion (avec votre fetch original)
        async function handleLoginSubmit(event) {
            event.preventDefault();
    
            const emailInput = document.getElementById('email');
            const passwordInput = document.getElementById('password');
            const email = emailInput ? emailInput.value : null;
            const password = passwordInput ? passwordInput.value : null;
    
            if (!email || !password) {
                loginMessage.textContent = 'Veuillez entrer email et mot de passe.';
                loginMessage.classList.remove('success'); // Assure que la classe de succès est enlevée
                return;
            }
    
            const submitButton = loginForm.querySelector('button[type="submit"]');
            const originalButtonText = submitButton.innerHTML;
            submitButton.disabled = true;
            submitButton.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Connexion en cours...';
            loginMessage.textContent = ''; 
            loginMessage.classList.remove('success'); // Enlève la classe 'success' avant la requête

            try {
                // Appel à l'API d'authentification (VOTRE LOGIQUE ORIGINALE)
                const response = await fetch('/api/auth', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ email, password }),
                });
                const result = await response.json();
    
                if (response.ok) {
                    loginMessage.textContent = 'Connexion réussie!';
                    loginMessage.classList.add('success'); // Ajoute la classe pour le style de succès
                    localStorage.setItem('powairAuthToken', result.token);
    
                    setTimeout(() => {
                        authPrompt.style.display = 'none';
                        displayUserInfo(result.user); 
                        initWebinar(); 
                        loginMessage.textContent = '';
                        loginMessage.classList.remove('success');
                    }, 500);
    
                } else {
                    loginMessage.textContent = result.error || 'Identifiants incorrects. Veuillez réessayer.';
                    // Pas besoin de loginMessage.classList.remove('success'); ici, car déjà fait
                    submitButton.disabled = false;
                    submitButton.innerHTML = originalButtonText;
                }
            } catch (error) {
                console.error('Erreur lors de la connexion:', error);
                loginMessage.textContent = 'Une erreur est survenue. Veuillez réessayer plus tard.';
                // Pas besoin de loginMessage.classList.remove('success');
                submitButton.disabled = false;
                submitButton.innerHTML = originalButtonText;
            }
        }
    
        // Vérification du token (avec votre fetch original)
        async function verifyToken(token) {
            try {
                // Appel à l'API de vérification (VOTRE LOGIQUE ORIGINALE)
                const response = await fetch('/api/verify-token', {
                    method: 'POST', // Ou GET selon votre API
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${token}`
                       }
                   });
                const result = await response.json();
    
                if (response.ok) {
                    authPrompt.style.display = 'none';
                    displayUserInfo(result.user);
                    initWebinar(); 
                } else {
                    localStorage.removeItem('powairAuthToken');
                    authPrompt.style.display = 'flex';
                    hideUserInfo();
                    resetVideoPlayer();
                }
            } catch (error) {
                console.error('Erreur lors de la vérification du token:', error);
                localStorage.removeItem('powairAuthToken');
                authPrompt.style.display = 'flex';
                hideUserInfo();
                resetVideoPlayer();
            }
        }
    
      // Fonction de déconnexion (corrigée ET améliorée pour réinitialiser le formulaire)
      function handleLogout(event) {
          if (event) { event.preventDefault(); }

          // 1. Actions de déconnexion standard
          localStorage.removeItem('powairAuthToken');
          hideUserInfo();
          resetVideoPlayer();

          // 2. Réinitialiser le formulaire de connexion dans la modale
          if (loginForm) {
              // Réinitialiser le message d'erreur/succès
              if (loginMessage) {
                  loginMessage.textContent = '';
                  loginMessage.classList.remove('success'); 
              }

              // Réinitialiser les champs (optionnel mais propre)
              const emailInput = document.getElementById('email');
              const passwordInput = document.getElementById('password');
              if (emailInput) emailInput.value = '';
              if (passwordInput) passwordInput.value = '';

              // Réinitialiser le bouton de soumission
              const submitButton = loginForm.querySelector('button[type="submit"]');
              if (submitButton) {
                  submitButton.disabled = false; 
                  submitButton.innerHTML = '<i class="fas fa-sign-in-alt"></i> Se connecter';
              }
          }
          authPrompt.style.display = 'flex';
      }
    
        // --- Initialisation du webinaire (Structure conservée) ---
        function initWebinar() {
            updateWebinarState(webinarConfig.state); 
            if (webinarConfig.state === 'soon') initStateCountdown(webinarConfig.startTime);
            if (webinarConfig.state === 'live' || (webinarConfig.state === 'ended' )) {
                initYoutubePlayer(webinarConfig.youtubeId);
            }
            initChat();
            initMainCountdown(webinarConfig.startTime);
            setupActionButtons(); 
        }
    
        function initYoutubePlayer(videoId) {
            if (youtubeContainer && videoId) {
                youtubeContainer.innerHTML = ''; 
                const iframe = document.createElement('iframe');
                iframe.id = 'youtube-iframe';
                iframe.className = 'webinar-iframe';
                // L'URL d'embed correcte pour YouTube
                iframe.src = `https://www.youtube.com/embed/${videoId}?autoplay=1&rel=0&modestbranding=1`;
                iframe.title = 'Webinaire Pow\'air';
                iframe.setAttribute('frameborder', '0');
                iframe.setAttribute('allow', 'accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share');
                iframe.setAttribute('allowfullscreen', '');
                youtubeContainer.appendChild(iframe);
            } else if (!youtubeContainer) {
                console.error("YouTube container not found!");
            }
        }
    
        // --- Mettez ici les DÉFINITIONS de vos autres fonctions si elles étaient dans ce bloc ---
        // (initChat, updateWebinarState, initStateCountdown, initMainCountdown, setupActionButtons, etc.)
        // Assurez-vous qu'elles sont bien définies ici ou dans script.js
        function updateWebinarState(state) { 
            // Placeholder - votre logique ici
            document.querySelectorAll('.webinar-state').forEach(el => el.classList.remove('active'));
            const currentStateElement = document.getElementById(`state-${state}`);
            if (currentStateElement) {
                currentStateElement.classList.add('active');
            }
            const statusBadge = document.getElementById('webinar-status-badge');
            if(statusBadge){
                if(state === 'live') { statusBadge.textContent = 'EN DIRECT'; statusBadge.style.display = 'inline-flex'; }
                else if(state === 'soon') { statusBadge.textContent = 'BIENTÔT'; statusBadge.style.display = 'inline-flex'; }
                else if(state === 'ended') { statusBadge.textContent = 'TERMINÉ'; statusBadge.style.display = 'inline-flex'; }
                else { statusBadge.style.display = 'none'; }
            }
        }
        function initStateCountdown(time) { /* ... votre logique ... */ }
        function initChat() { 
            const chatInput = document.getElementById('chat-input');
            const chatSendButton = document.getElementById('chat-send');
            const chatMessagesContainer = document.getElementById('chat-messages');

            if(chatSendButton && chatInput && chatMessagesContainer) {
                chatSendButton.addEventListener('click', sendMessage);
                chatInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        sendMessage();
                    }
                });
            }
            function sendMessage() {
                const messageText = chatInput.value.trim();
                if (messageText) {
                    const messageDiv = document.createElement('div');
                    messageDiv.classList.add('webinar-chat-message', 'user');
                    
                    const messageInfo = document.createElement('div');
                    messageInfo.classList.add('webinar-chat-message-info');
                    messageInfo.textContent = userName.textContent || "Vous"; // Utilise le nom de l'utilisateur connecté
                    
                    messageDiv.appendChild(messageInfo);
                    messageDiv.append(document.createTextNode(messageText)); // Pour éviter injection HTML
                    
                    chatMessagesContainer.appendChild(messageDiv);
                    chatInput.value = '';
                    chatMessagesContainer.scrollTop = chatMessagesContainer.scrollHeight; // Scroll vers le bas
                }
            }
         }
        function initMainCountdown(targetTime) {
            const daysEl = document.getElementById('countdown-days');
            const hoursEl = document.getElementById('countdown-hours');
            const minutesEl = document.getElementById('countdown-minutes');
            const secondsEl = document.getElementById('countdown-seconds');

            if(!daysEl || !hoursEl || !minutesEl || !secondsEl) return;

            function updateCountdown() {
                const now = new Date().getTime();
                const distance = targetTime - now;

                if (distance < 0) {
                    daysEl.textContent = '00';
                    hoursEl.textContent = '00';
                    minutesEl.textContent = '00';
                    secondsEl.textContent = '00';
                    // Optionnel: changer l'état du webinaire si le compte à rebours principal arrive à zéro
                    // if (webinarConfig.state === 'soon') { updateWebinarState('live'); initYoutubePlayer(webinarConfig.youtubeId); }
                    clearInterval(interval);
                    return;
                }

                const days = Math.floor(distance / (1000 * 60 * 60 * 24));
                const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((distance % (1000 * 60)) / 1000);

                daysEl.textContent = String(days).padStart(2, '0');
                hoursEl.textContent = String(hours).padStart(2, '0');
                minutesEl.textContent = String(minutes).padStart(2, '0');
                secondsEl.textContent = String(seconds).padStart(2, '0');
            }
            updateCountdown(); // Appel initial
            const interval = setInterval(updateCountdown, 1000);
        }
        function setupActionButtons() { 
            const shareBtn = document.getElementById('share-button');
            if(shareBtn) shareBtn.addEventListener('click', () => alert('Partagez ce webinaire ! (Logique de partage à implémenter)'));
            
            const downloadBtn = document.getElementById('download-button');
            if(downloadBtn) downloadBtn.addEventListener('click', () => {
                if(webinarConfig.presentationUrl) window.open(webinarConfig.presentationUrl, '_blank');
                else alert('Présentation non disponible pour le moment.');
            });

            const notifyBtn = document.getElementById('notify-button');
            if(notifyBtn) notifyBtn.addEventListener('click', () => alert('Vous serez notifié ! (Logique de notification à implémenter)'));
            
            const replayBtn = document.getElementById('replay-button');
            if(replayBtn) replayBtn.addEventListener('click', (e) => {
                e.preventDefault();
                updateWebinarState('live'); // Réaffiche le lecteur
                initYoutubePlayer(webinarConfig.youtubeId); // Lance le replay
            });

            const appointmentBtn = document.getElementById('appointment-button');
            if(appointmentBtn) appointmentBtn.addEventListener('click', (e) => {
                e.preventDefault();
                alert('Redirection vers la page de prise de rendez-vous... (Logique à implémenter)');
            });
        }
    
    
        // --- Logique Principale au Chargement ---
        const initialAuthToken = localStorage.getItem('powairAuthToken');
    
        // Attacher le listener au formulaire de connexion
        if (loginForm) {
            loginForm.addEventListener('submit', handleLoginSubmit);
        } else {
            console.error("Login form not found!");
        }
    
        // Attacher les listeners aux boutons de déconnexion
        if (logoutButton) {
            logoutButton.addEventListener('click', handleLogout);
        }
         if (mobileLogoutButton) {
            mobileLogoutButton.addEventListener('click', function(event) { handleLogout(event); });
        }
    
        // Décider quoi faire au chargement basé sur le token
        if (!initialAuthToken) {
            authPrompt.style.display = 'flex';
            hideUserInfo(); 
            resetVideoPlayer(); 
        } else {
            authPrompt.style.display = 'none'; 
            verifyToken(initialAuthToken); 
        }
    
    });
  </script>
</body>
</html>